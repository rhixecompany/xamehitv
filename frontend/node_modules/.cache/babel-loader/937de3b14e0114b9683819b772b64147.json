{"ast":null,"code":"import _regeneratorRuntime from\"/home/bot/Desktop/dev/projects/xamehi-tv/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/bot/Desktop/dev/projects/xamehi-tv/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import authService from'./authService';// Get user from localStorage\nvar user=JSON.parse(localStorage.getItem('user'));var initialState={user:user?user:null,isError:false,isSuccess:false,isLoading:false,message:''};// Register user\nexport var register=createAsyncThunk('auth/register',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(user,thunkAPI){var message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return authService.register(user);case 3:return _context.abrupt(\"return\",_context.sent);case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);message=_context.t0.response&&_context.t0.response.data&&_context.t0.response.data.message||_context.t0.message||_context.t0.toString();return _context.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());// Login user\nexport var login=createAsyncThunk('auth/login',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(user,thunkAPI){var message;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return authService.login(user);case 3:return _context2.abrupt(\"return\",_context2.sent);case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);message=_context2.t0.response&&_context2.t0.response.data&&_context2.t0.response.data.message||_context2.t0.message||_context2.t0.toString();return _context2.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());export var logout=createAsyncThunk('auth/logout',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return authService.logout();case 2:case\"end\":return _context3.stop();}}},_callee3);})));export var authSlice=createSlice({name:'auth',initialState:initialState,reducers:{reset:function reset(state){state.isLoading=false;state.isSuccess=false;state.isError=false;state.message='';}},extraReducers:function extraReducers(builder){builder.addCase(register.pending,function(state){state.isLoading=true;}).addCase(register.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.user=action.payload;}).addCase(register.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;state.user=null;}).addCase(login.pending,function(state){state.isLoading=true;}).addCase(login.fulfilled,function(state,action){state.isLoading=false;state.isSuccess=true;state.user=action.payload;}).addCase(login.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;state.user=null;}).addCase(logout.fulfilled,function(state){state.user=null;});}});var reset=authSlice.actions.reset;export{reset};export default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","authService","user","JSON","parse","localStorage","getItem","initialState","isError","isSuccess","isLoading","message","register","thunkAPI","response","data","toString","rejectWithValue","login","logout","authSlice","name","reducers","reset","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","actions","reducer"],"sources":["/home/bot/Desktop/dev/projects/xamehi-tv/frontend/src/features/auth/authSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit'\nimport authService from './authService'\n\n// Get user from localStorage\nconst user = JSON.parse(localStorage.getItem('user'))\n\nconst initialState = {\n  user: user ? user : null,\n  isError: false,\n  isSuccess: false,\n  isLoading: false,\n  message: '',\n}\n\n// Register user\nexport const register = createAsyncThunk(\n  'auth/register',\n  async (user, thunkAPI) => {\n    try {\n      return await authService.register(user)\n    } catch (error) {\n      const message =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString()\n      return thunkAPI.rejectWithValue(message)\n    }\n  }\n)\n\n// Login user\nexport const login = createAsyncThunk('auth/login', async (user, thunkAPI) => {\n  try {\n    return await authService.login(user)\n  } catch (error) {\n    const message =\n      (error.response && error.response.data && error.response.data.message) ||\n      error.message ||\n      error.toString()\n    return thunkAPI.rejectWithValue(message)\n  }\n})\n\nexport const logout = createAsyncThunk('auth/logout', async () => {\n  await authService.logout()\n})\n\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {\n    reset: (state) => {\n      state.isLoading = false\n      state.isSuccess = false\n      state.isError = false\n      state.message = ''\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(register.pending, (state) => {\n        state.isLoading = true\n      })\n      .addCase(register.fulfilled, (state, action) => {\n        state.isLoading = false\n        state.isSuccess = true\n        state.user = action.payload\n      })\n      .addCase(register.rejected, (state, action) => {\n        state.isLoading = false\n        state.isError = true\n        state.message = action.payload\n        state.user = null\n      })\n      .addCase(login.pending, (state) => {\n        state.isLoading = true\n      })\n      .addCase(login.fulfilled, (state, action) => {\n        state.isLoading = false\n        state.isSuccess = true\n        state.user = action.payload\n      })\n      .addCase(login.rejected, (state, action) => {\n        state.isLoading = false\n        state.isError = true\n        state.message = action.payload\n        state.user = null\n      })\n      .addCase(logout.fulfilled, (state) => {\n        state.user = null\n      })\n  },\n})\n\nexport const { reset } = authSlice.actions\nexport default authSlice.reducer\n"],"mappings":"8RAAA,OAASA,WAAT,CAAsBC,gBAAtB,KAA8C,kBAA9C,CACA,MAAOC,YAAP,KAAwB,eAAxB,CAEA;AACA,GAAMC,KAAI,CAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAb,CAEA,GAAMC,aAAY,CAAG,CACnBL,IAAI,CAAEA,IAAI,CAAGA,IAAH,CAAU,IADD,CAEnBM,OAAO,CAAE,KAFU,CAGnBC,SAAS,CAAE,KAHQ,CAInBC,SAAS,CAAE,KAJQ,CAKnBC,OAAO,CAAE,EALU,CAArB,CAQA;AACA,MAAO,IAAMC,SAAQ,CAAGZ,gBAAgB,CACtC,eADsC,4FAEtC,iBAAOE,IAAP,CAAaW,QAAb,sKAEiBZ,YAAW,CAACW,QAAZ,CAAqBV,IAArB,CAFjB,+GAIUS,OAJV,CAKO,YAAMG,QAAN,EACC,YAAMA,QAAN,CAAeC,IADhB,EAEC,YAAMD,QAAN,CAAeC,IAAf,CAAoBJ,OAFtB,EAGA,YAAMA,OAHN,EAIA,YAAMK,QAAN,EATN,iCAUWH,QAAQ,CAACI,eAAT,CAAyBN,OAAzB,CAVX,sEAFsC,mEAAjC,CAiBP;AACA,MAAO,IAAMO,MAAK,CAAGlB,gBAAgB,CAAC,YAAD,6FAAe,kBAAOE,IAAP,CAAaW,QAAb,4KAEnCZ,YAAW,CAACiB,KAAZ,CAAkBhB,IAAlB,CAFmC,oHAI1CS,OAJ0C,CAK7C,aAAMG,QAAN,EAAkB,aAAMA,QAAN,CAAeC,IAAjC,EAAyC,aAAMD,QAAN,CAAeC,IAAf,CAAoBJ,OAA9D,EACA,aAAMA,OADN,EAEA,aAAMK,QAAN,EAP8C,kCAQzCH,QAAQ,CAACI,eAAT,CAAyBN,OAAzB,CARyC,wEAAf,qEAA9B,CAYP,MAAO,IAAMQ,OAAM,CAAGnB,gBAAgB,CAAC,aAAD,wEAAgB,iKAC9CC,YAAW,CAACkB,MAAZ,EAD8C,yDAAhB,GAA/B,CAIP,MAAO,IAAMC,UAAS,CAAGrB,WAAW,CAAC,CACnCsB,IAAI,CAAE,MAD6B,CAEnCd,YAAY,CAAZA,YAFmC,CAGnCe,QAAQ,CAAE,CACRC,KAAK,CAAE,eAACC,KAAD,CAAW,CAChBA,KAAK,CAACd,SAAN,CAAkB,KAAlB,CACAc,KAAK,CAACf,SAAN,CAAkB,KAAlB,CACAe,KAAK,CAAChB,OAAN,CAAgB,KAAhB,CACAgB,KAAK,CAACb,OAAN,CAAgB,EAAhB,CACD,CANO,CAHyB,CAWnCc,aAAa,CAAE,uBAACC,OAAD,CAAa,CAC1BA,OAAO,CACJC,OADH,CACWf,QAAQ,CAACgB,OADpB,CAC6B,SAACJ,KAAD,CAAW,CACpCA,KAAK,CAACd,SAAN,CAAkB,IAAlB,CACD,CAHH,EAIGiB,OAJH,CAIWf,QAAQ,CAACiB,SAJpB,CAI+B,SAACL,KAAD,CAAQM,MAAR,CAAmB,CAC9CN,KAAK,CAACd,SAAN,CAAkB,KAAlB,CACAc,KAAK,CAACf,SAAN,CAAkB,IAAlB,CACAe,KAAK,CAACtB,IAAN,CAAa4B,MAAM,CAACC,OAApB,CACD,CARH,EASGJ,OATH,CASWf,QAAQ,CAACoB,QATpB,CAS8B,SAACR,KAAD,CAAQM,MAAR,CAAmB,CAC7CN,KAAK,CAACd,SAAN,CAAkB,KAAlB,CACAc,KAAK,CAAChB,OAAN,CAAgB,IAAhB,CACAgB,KAAK,CAACb,OAAN,CAAgBmB,MAAM,CAACC,OAAvB,CACAP,KAAK,CAACtB,IAAN,CAAa,IAAb,CACD,CAdH,EAeGyB,OAfH,CAeWT,KAAK,CAACU,OAfjB,CAe0B,SAACJ,KAAD,CAAW,CACjCA,KAAK,CAACd,SAAN,CAAkB,IAAlB,CACD,CAjBH,EAkBGiB,OAlBH,CAkBWT,KAAK,CAACW,SAlBjB,CAkB4B,SAACL,KAAD,CAAQM,MAAR,CAAmB,CAC3CN,KAAK,CAACd,SAAN,CAAkB,KAAlB,CACAc,KAAK,CAACf,SAAN,CAAkB,IAAlB,CACAe,KAAK,CAACtB,IAAN,CAAa4B,MAAM,CAACC,OAApB,CACD,CAtBH,EAuBGJ,OAvBH,CAuBWT,KAAK,CAACc,QAvBjB,CAuB2B,SAACR,KAAD,CAAQM,MAAR,CAAmB,CAC1CN,KAAK,CAACd,SAAN,CAAkB,KAAlB,CACAc,KAAK,CAAChB,OAAN,CAAgB,IAAhB,CACAgB,KAAK,CAACb,OAAN,CAAgBmB,MAAM,CAACC,OAAvB,CACAP,KAAK,CAACtB,IAAN,CAAa,IAAb,CACD,CA5BH,EA6BGyB,OA7BH,CA6BWR,MAAM,CAACU,SA7BlB,CA6B6B,SAACL,KAAD,CAAW,CACpCA,KAAK,CAACtB,IAAN,CAAa,IAAb,CACD,CA/BH,EAgCD,CA5CkC,CAAD,CAA7B,CA+CA,GAAQqB,MAAR,CAAkBH,SAAS,CAACa,OAA5B,CAAQV,KAAR,C,cACP,cAAeH,UAAS,CAACc,OAAzB"},"metadata":{},"sourceType":"module"}