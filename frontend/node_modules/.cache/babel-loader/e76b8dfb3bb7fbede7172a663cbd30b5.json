{"ast":null,"code":"import _regeneratorRuntime from\"/home/bot/Desktop/dev/projects/xamehi-tv/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/bot/Desktop/dev/projects/xamehi-tv/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import movieService from\"./movieService\";var initialState={movies:[],isError:false,isSucess:false,isLoading:false,message:\"\"};// Create new movie\nexport var createMovie=createAsyncThunk(\"movies/create\",/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(movieData,thunkAPI){var token,message;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;token=thunkAPI.getState().auth.user.token;_context.next=4;return movieService.createMovie(movieData,token);case 4:return _context.abrupt(\"return\",_context.sent);case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);message=_context.t0.response&&_context.t0.response.data&&_context.t0.response.data.message||_context.t0.message||_context.t0.toString();return _context.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());// Get Movies\nexport var getMovies=createAsyncThunk(\"movies/getAll\",/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(_,thunkAPI){var token,message;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;token=thunkAPI.getState().auth.user.token;_context2.next=4;return movieService.getMovies(token);case 4:return _context2.abrupt(\"return\",_context2.sent);case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);message=_context2.t0.response&&_context2.t0.response.data&&_context2.t0.response.data.message||_context2.t0.message||_context2.t0.toString();return _context2.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}());// Delete movie\nexport var deleteMovie=createAsyncThunk(\"movies/delete\",/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id,thunkAPI){var token,message;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;token=thunkAPI.getState().auth.user.token;_context3.next=4;return movieService.deleteMovie(id,token);case 4:return _context3.abrupt(\"return\",_context3.sent);case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);message=_context3.t0.response&&_context3.t0.response.data&&_context3.t0.response.data.message||_context3.t0.message||_context3.t0.toString();return _context3.abrupt(\"return\",thunkAPI.rejectWithValue(message));case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}());export var movieSlice=createSlice({name:\"movie\",initialState:initialState,reducers:{reset:function reset(state){return initialState;}},extraReducers:function extraReducers(builder){builder.addCase(createMovie.pending,function(state){state.isLoading=true;}).addCase(createMovie.fulfilled,function(state,action){state.isLoading=false;state.isSucess=true;state.movies.push(action.payload);}).addCase(createMovie.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;}).addCase(getMovies.pending,function(state){state.isLoading=true;}).addCase(getMovies.fulfilled,function(state,action){state.isLoading=false;state.isSucess=true;state.movies=action.payload;}).addCase(getMovies.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;}).addCase(deleteMovie.pending,function(state){state.isLoading=true;}).addCase(deleteMovie.fulfilled,function(state,action){state.isLoading=false;state.isSucess=true;state.movies=state.movies.filter(function(movie){return movie._id!==action.payload.id;});}).addCase(deleteMovie.rejected,function(state,action){state.isLoading=false;state.isError=true;state.message=action.payload;});}});var reset=movieSlice.actions.reset;export{reset};export default movieSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","movieService","initialState","movies","isError","isSucess","isLoading","message","createMovie","movieData","thunkAPI","token","getState","auth","user","response","data","toString","rejectWithValue","getMovies","_","deleteMovie","id","movieSlice","name","reducers","reset","state","extraReducers","builder","addCase","pending","fulfilled","action","push","payload","rejected","filter","movie","_id","actions","reducer"],"sources":["/home/bot/Desktop/dev/projects/xamehi-tv/frontend/src/features/movies/movieSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\n\nimport movieService from \"./movieService\";\n\nconst initialState = {\n  movies: [],\n  isError: false,\n  isSucess: false,\n  isLoading: false,\n  message: \"\",\n};\n\n// Create new movie\nexport const createMovie = createAsyncThunk(\n  \"movies/create\",\n  async (movieData, thunkAPI) => {\n    try {\n      const token = thunkAPI.getState().auth.user.token;\n      return await movieService.createMovie(movieData, token);\n    } catch (error) {\n      const message =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString();\n      return thunkAPI.rejectWithValue(message);\n    }\n  }\n);\n\n// Get Movies\nexport const getMovies = createAsyncThunk(\n  \"movies/getAll\",\n  async (_, thunkAPI) => {\n    try {\n      const token = thunkAPI.getState().auth.user.token;\n      return await movieService.getMovies(token);\n    } catch (error) {\n      const message =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString();\n      return thunkAPI.rejectWithValue(message);\n    }\n  }\n);\n\n// Delete movie\nexport const deleteMovie = createAsyncThunk(\n  \"movies/delete\",\n  async (id, thunkAPI) => {\n    try {\n      const token = thunkAPI.getState().auth.user.token;\n      return await movieService.deleteMovie(id, token);\n    } catch (error) {\n      const message =\n        (error.response &&\n          error.response.data &&\n          error.response.data.message) ||\n        error.message ||\n        error.toString();\n      return thunkAPI.rejectWithValue(message);\n    }\n  }\n);\n\nexport const movieSlice = createSlice({\n  name: \"movie\",\n  initialState,\n  reducers: {\n    reset: (state) => initialState,\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(createMovie.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(createMovie.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isSucess = true;\n        state.movies.push(action.payload);\n      })\n      .addCase(createMovie.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isError = true;\n        state.message = action.payload;\n      })\n      .addCase(getMovies.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(getMovies.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isSucess = true;\n        state.movies = action.payload;\n      })\n      .addCase(getMovies.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isError = true;\n        state.message = action.payload;\n      })\n      .addCase(deleteMovie.pending, (state) => {\n        state.isLoading = true;\n      })\n      .addCase(deleteMovie.fulfilled, (state, action) => {\n        state.isLoading = false;\n        state.isSucess = true;\n        state.movies = state.movies.filter(\n          (movie) => movie._id !== action.payload.id\n        );\n      })\n      .addCase(deleteMovie.rejected, (state, action) => {\n        state.isLoading = false;\n        state.isError = true;\n        state.message = action.payload;\n      });\n  },\n});\n\nexport const { reset } = movieSlice.actions;\nexport default movieSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}